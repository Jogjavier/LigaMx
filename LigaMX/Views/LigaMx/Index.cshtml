@model List<LigaMX.Models.LigaMx>

<!DOCTYPE html>
<html>
<head>
    <title>Resultados Liga MX</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Resultados de la Liga MX</h1>
        <div class="text-end mb-3">
            <a asp-action="Create" class="btn btn-success">Agregar Partido</a>
        </div>
        <table class="table table-bordered mt-3">
            <thead class="table-dark">
                <tr>
                    <th>Partido</th>
                    <th>Equipo 1</th>
                    <th>Equipo 2</th>
                    <th>Resultado</th>
                    <th>Estadio</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var partido in Model)
                {
                    <tr id="row-@partido.Partido.Replace(' ', '-')">
                        <td>@partido.Partido</td>
                        <td>@partido.Equipo1</td>
                        <td>@partido.Equipo2</td>
                        <td>@partido.Resultado</td>
                        <td>@partido.Estadio</td>
                        <td>
                            <a asp-action="Edit" asp-route-partido="@partido.Partido" class="btn btn-warning btn-sm">Editar</a>
                            <button class="btn btn-danger btn-delete" data-partido="@partido.Partido">Eliminar</button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <script>
        $(document).ready(function () {
            $(".btn-delete").click(function () {
                var partido = $(this).data("partido");

                if (confirm("¿Seguro que quieres eliminar este partido?")) {
                    $.ajax({
                        url: "/LigaMx/Delete",
                        type: "DELETE",
                        data: { partido: partido },
                        success: function (response) {
                            if (response.success) {
                                alert(response.message);
                                $("#row-" + partido.replace(/\s/g, "-")).remove();
                            } else {
                                alert("Error: " + response.message);
                            }
                        },
                        error: function () {
                            alert("Hubo un error al eliminar el partido.");
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>
